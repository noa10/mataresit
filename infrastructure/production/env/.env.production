# Production Environment Configuration for Paperless Maverick
# This file contains production environment variables
# DO NOT commit sensitive values to version control

# Application Configuration
NODE_ENV=production
LOG_LEVEL=info
PORT=3000
API_VERSION=v1

# Supabase Configuration (replace with actual values)
SUPABASE_URL=https://mpmkbtsufihzdelrlszs.supabase.co
SUPABASE_ANON_KEY=<REPLACE_WITH_ACTUAL_ANON_KEY>
SUPABASE_SERVICE_ROLE_KEY=<REPLACE_WITH_ACTUAL_SERVICE_ROLE_KEY>
SUPABASE_PROJECT_ID=mpmkbtsufihzdelrlszs

# AI/ML Configuration (replace with actual values)
GEMINI_API_KEY=<REPLACE_WITH_ACTUAL_GEMINI_API_KEY>
OPENAI_API_KEY=<REPLACE_WITH_ACTUAL_OPENAI_API_KEY>

# Security Configuration
API_KEY_ENCRYPTION_KEY=<REPLACE_WITH_32_BYTE_ENCRYPTION_KEY>
JWT_SECRET=<REPLACE_WITH_JWT_SECRET>

# CORS Configuration
CORS_ALLOWED_ORIGINS=https://mataresit.com,https://app.mataresit.com,https://api.mataresit.com
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=X-API-Key,Content-Type,Authorization

# Rate Limiting Configuration
API_RATE_LIMIT_WINDOW=3600
API_RATE_LIMIT_MAX_REQUESTS=1000
API_RATE_LIMIT_BURST=50

# Feature Flags for Gradual Rollout
ENABLE_EMBEDDING_MONITORING=true
EMBEDDING_MONITORING_ROLLOUT_PERCENTAGE=10
ENABLE_QUEUE_PROCESSING=false
QUEUE_PROCESSING_ROLLOUT_PERCENTAGE=0
ENABLE_BATCH_OPTIMIZATION=false
BATCH_OPTIMIZATION_ROLLOUT_PERCENTAGE=0

# Queue Configuration
QUEUE_POLL_INTERVAL=5000
MAX_CONCURRENT_JOBS=3
QUEUE_RETRY_ATTEMPTS=3
QUEUE_RETRY_DELAY=5000
QUEUE_BATCH_SIZE=10

# Rate Limiting for AI APIs
MAX_REQUESTS_PER_MINUTE=60
MAX_TOKENS_PER_MINUTE=100000
BACKOFF_MULTIPLIER=1.5
MAX_BACKOFF_MS=30000

# Cache Configuration
CACHE_TTL_SECONDS=300
CACHE_MAX_SIZE=1000
REDIS_URL=redis://redis:6379

# Database Configuration
DB_POOL_SIZE=10
DB_CONNECTION_TIMEOUT=30000
DB_IDLE_TIMEOUT=600000

# Monitoring and Logging
ENABLE_PERFORMANCE_MONITORING=true
ENABLE_SECURITY_LOGGING=true
METRICS_PORT=9090
HEALTH_CHECK_PORT=8080
SENTRY_DSN=<REPLACE_WITH_SENTRY_DSN>

# Email Configuration
RESEND_API_KEY=<REPLACE_WITH_RESEND_API_KEY>

# Notification Configuration
SLACK_WEBHOOK_URL=<REPLACE_WITH_SLACK_WEBHOOK_URL>
PAGERDUTY_INTEGRATION_KEY=<REPLACE_WITH_PAGERDUTY_KEY>

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_CLASS=standard

# SSL/TLS Configuration
TLS_ENABLED=true
CERT_MANAGER_ISSUER=letsencrypt-prod

# Worker Configuration
WORKER_MIN_REPLICAS=2
WORKER_MAX_REPLICAS=6
WORKER_SCALE_UP_THRESHOLD=80
WORKER_SCALE_DOWN_THRESHOLD=20

# Application Scaling
APP_MIN_REPLICAS=3
APP_MAX_REPLICAS=10
APP_SCALE_UP_THRESHOLD=70
APP_SCALE_DOWN_THRESHOLD=30

# Resource Limits
APP_CPU_REQUEST=250m
APP_CPU_LIMIT=500m
APP_MEMORY_REQUEST=512Mi
APP_MEMORY_LIMIT=1Gi

WORKER_CPU_REQUEST=250m
WORKER_CPU_LIMIT=500m
WORKER_MEMORY_REQUEST=256Mi
WORKER_MEMORY_LIMIT=512Mi

# Ingress Configuration
INGRESS_CLASS=nginx
INGRESS_RATE_LIMIT=100
INGRESS_RATE_LIMIT_WINDOW=1m
INGRESS_PROXY_BODY_SIZE=50m
INGRESS_PROXY_TIMEOUT=60

# Grafana Configuration
GRAFANA_ADMIN_PASSWORD=<REPLACE_WITH_SECURE_PASSWORD>

# Prometheus Configuration
PROMETHEUS_RETENTION_TIME=200h
PROMETHEUS_STORAGE_SIZE=10Gi

# Network Policies
NETWORK_POLICIES_ENABLED=true
POD_SECURITY_STANDARDS=restricted
RBAC_ENABLED=true

# Deployment Configuration
DEPLOYMENT_STRATEGY=RollingUpdate
ROLLING_UPDATE_MAX_SURGE=1
ROLLING_UPDATE_MAX_UNAVAILABLE=0

# Health Check Configuration
LIVENESS_PROBE_INITIAL_DELAY=30
LIVENESS_PROBE_PERIOD=10
LIVENESS_PROBE_TIMEOUT=5
LIVENESS_PROBE_FAILURE_THRESHOLD=3

READINESS_PROBE_INITIAL_DELAY=5
READINESS_PROBE_PERIOD=5
READINESS_PROBE_TIMEOUT=3
READINESS_PROBE_FAILURE_THRESHOLD=3

# Termination Configuration
TERMINATION_GRACE_PERIOD=30

# Storage Configuration
STORAGE_CLASS=fast-ssd
PERSISTENT_VOLUME_SIZE=20Gi

# Logging Configuration
LOG_FORMAT=json
LOG_ROTATION_SIZE=100MB
LOG_RETENTION_DAYS=7
