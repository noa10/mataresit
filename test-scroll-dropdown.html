<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScrollArea Dropdown Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Simulate the ScrollArea behavior */
        .scroll-area {
            position: relative;
            overflow: hidden;
        }
        
        .scroll-viewport {
            height: 100%;
            width: 100%;
            border-radius: inherit;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: contain;
            scroll-behavior: smooth;
        }
        
        .dropdown-content {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            padding: 0;
            min-width: 200px;
        }
        
        .dropdown-item {
            padding: 8px 12px;
            cursor: pointer;
            border-bottom: 1px solid #f3f4f6;
            min-height: 44px;
            display: flex;
            align-items: center;
        }
        
        .dropdown-item:hover {
            background-color: #f9fafb;
        }
        
        .dropdown-item:last-child {
            border-bottom: none;
        }
        
        @media (max-width: 768px) {
            .mobile-dropdown {
                width: calc(100vw - 2rem);
                max-height: 80vh;
            }
        }
    </style>
</head>
<body class="bg-gray-100 p-4">
    <div class="max-w-md mx-auto">
        <h1 class="text-2xl font-bold mb-4">ScrollArea Dropdown Test</h1>
        
        <p class="mb-4 text-gray-600">
            This test simulates the mobile dropdown with ScrollArea functionality.
            Resize your browser to mobile width (&lt; 768px) to test.
        </p>
        
        <div class="relative">
            <button id="dropdownButton" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                Open Dropdown
            </button>
            
            <div id="dropdownContent" class="dropdown-content mobile-dropdown absolute top-full right-0 mt-2 hidden z-50">
                <div class="scroll-area max-h-[80vh] lg:max-h-none">
                    <div class="scroll-viewport">
                        <div class="p-1">
                            <!-- User Info Header -->
                            <div class="dropdown-item font-semibold border-b-2">
                                üë§ user@example.com
                            </div>
                            
                            <!-- Team Section -->
                            <div class="dropdown-item text-xs text-gray-500 uppercase">
                                Team Workspace
                            </div>
                            <div class="dropdown-item">üè¢ My Team</div>
                            
                            <!-- Navigation Section -->
                            <div class="dropdown-item text-xs text-gray-500 uppercase">
                                Navigation
                            </div>
                            <div class="dropdown-item">üìä Dashboard</div>
                            <div class="dropdown-item">üîç Search</div>
                            <div class="dropdown-item">üìà Analysis</div>
                            
                            <!-- Collaboration Section -->
                            <div class="dropdown-item text-xs text-gray-500 uppercase">
                                Collaboration
                            </div>
                            <div class="dropdown-item">üë• Teams</div>
                            <div class="dropdown-item">üìÑ Claims</div>
                            
                            <!-- Tools Section -->
                            <div class="dropdown-item text-xs text-gray-500 uppercase">
                                Tools & Settings
                            </div>
                            <div class="dropdown-item">‚öôÔ∏è Settings</div>
                            <div class="dropdown-item">üîß API Reference</div>
                            <div class="dropdown-item">üí∞ Pricing</div>
                            
                            <!-- Actions Section -->
                            <div class="dropdown-item text-xs text-gray-500 uppercase">
                                Actions
                            </div>
                            <div class="dropdown-item">‚ûï New Chat</div>
                            <div class="dropdown-item">üåê English</div>
                            <div class="dropdown-item">üåô Light Mode</div>
                            
                            <!-- Chat History Section (simulated) -->
                            <div class="dropdown-item text-xs text-gray-500 uppercase">
                                Chat History
                            </div>
                            <div class="dropdown-item">üí¨ Recent Chat 1</div>
                            <div class="dropdown-item">üí¨ Recent Chat 2</div>
                            <div class="dropdown-item">üí¨ Recent Chat 3</div>
                            <div class="dropdown-item">üí¨ Recent Chat 4</div>
                            <div class="dropdown-item">üí¨ Recent Chat 5</div>
                            
                            <!-- User Actions -->
                            <div class="dropdown-item">üë§ Profile</div>
                            <div class="dropdown-item text-red-600">üö™ Logout</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="mt-8 p-4 bg-white rounded border">
            <h3 class="font-bold mb-2">Test Instructions:</h3>
            <ol class="list-decimal list-inside space-y-1 text-sm">
                <li>Open browser developer tools (F12)</li>
                <li>Set device simulation to mobile (e.g., iPhone 12: 390√ó844)</li>
                <li>Click "Open Dropdown" button</li>
                <li>Verify that the dropdown content is scrollable</li>
                <li>Check that all items are accessible via scrolling</li>
                <li>Test touch scrolling if on a touch device</li>
            </ol>
        </div>
        
        <div class="mt-4 p-4 bg-yellow-50 rounded border border-yellow-200">
            <h3 class="font-bold mb-2 text-yellow-800">Debug Info:</h3>
            <div id="debugInfo" class="text-sm text-yellow-700">
                Click the dropdown to see debug information
            </div>
        </div>
    </div>

    <script>
        const button = document.getElementById('dropdownButton');
        const dropdown = document.getElementById('dropdownContent');
        const debugInfo = document.getElementById('debugInfo');
        
        let isOpen = false;
        
        button.addEventListener('click', () => {
            isOpen = !isOpen;
            
            if (isOpen) {
                dropdown.classList.remove('hidden');
                button.textContent = 'Close Dropdown';
                
                // Debug information
                setTimeout(() => {
                    const scrollArea = dropdown.querySelector('.scroll-area');
                    const viewport = dropdown.querySelector('.scroll-viewport');
                    
                    const dropdownRect = dropdown.getBoundingClientRect();
                    const viewportRect = viewport.getBoundingClientRect();
                    
                    debugInfo.innerHTML = `
                        <strong>Dropdown:</strong> ${dropdownRect.width.toFixed(0)}√ó${dropdownRect.height.toFixed(0)}<br>
                        <strong>Viewport:</strong> ${window.innerWidth}√ó${window.innerHeight}<br>
                        <strong>80vh:</strong> ${(window.innerHeight * 0.8).toFixed(0)}px<br>
                        <strong>Scrollable:</strong> ${viewport.scrollHeight > viewport.clientHeight ? 'Yes' : 'No'}<br>
                        <strong>Scroll Height:</strong> ${viewport.scrollHeight}px<br>
                        <strong>Client Height:</strong> ${viewport.clientHeight}px
                    `;
                }, 100);
            } else {
                dropdown.classList.add('hidden');
                button.textContent = 'Open Dropdown';
                debugInfo.textContent = 'Click the dropdown to see debug information';
            }
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (!dropdown.contains(e.target) && !button.contains(e.target) && isOpen) {
                isOpen = false;
                dropdown.classList.add('hidden');
                button.textContent = 'Open Dropdown';
            }
        });
        
        // Test scrolling functionality
        window.testScroll = function() {
            const viewport = dropdown.querySelector('.scroll-viewport');
            if (viewport) {
                console.log('Testing scroll...');
                const originalScrollTop = viewport.scrollTop;
                viewport.scrollTop = 100;
                
                setTimeout(() => {
                    console.log('Scroll test result:', {
                        original: originalScrollTop,
                        attempted: 100,
                        actual: viewport.scrollTop,
                        working: viewport.scrollTop !== originalScrollTop
                    });
                    viewport.scrollTop = originalScrollTop;
                }, 100);
            }
        };
        
        console.log('Test page loaded. Use testScroll() to test scrolling functionality.');
    </script>
</body>
</html>
